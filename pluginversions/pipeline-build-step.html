<html>
    <head>
        <title>Plugin and Core Version Matrix for the pipeline-build-step Plugin</title>
        <style type="text/css">
body, table {
    font-family: monospace;
}
table {
    border-collapse: collapse;
    border: 1px solid #FF0000;
}

table td, table th {
    border: 1px solid #FF0000;
    text-align: center;
    padding: 3px;
}
tr.lts {
    background-color: #eef;
}
td.subtotal {
    background-color: #ccc;
}
        </style>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script type="text/javascript">
$(document).ready(function() {

    var versionData = {"2.5":{"1.509.4":1,"1.566":2,"1.595":2,"1.596.1":2,"1.596.2":1,"1.596.3":1,"1.599":1,"1.601":1,"1.602":1,"1.609":1,"1.609.1":1,"1.612":2,"1.617":1,"1.620":1,"1.622":2,"1.623":1,"1.625.3":3,"1.626":1,"1.627":4,"1.628":2,"1.630":5,"1.631":4,"1.634":3,"1.635":2,"1.637":2,"1.638":7,"1.639":3,"1.640":1,"1.641":3,"1.642":6,"1.642.1":13,"1.642.21":1,"1.642.4":59,"1.643":14,"1.644":5,"1.651.1":32,"1.651.2":31,"1.651.3":128,"1.653":9,"1.654":6,"1.655":3,"1.656":17,"1.658":17,"2.0":36,"2.0-beta-1":1,"2.0-rc-1":3,"2.1":15,"2.10":24,"2.11":23,"2.12":6,"2.13":10,"2.14":16,"2.15":13,"2.16":17,"2.17":25,"2.18":14,"2.19":37,"2.19.1":164,"2.19.2":104,"2.19.3":105,"2.19.3.1-rolling":1,"2.19.4":299,"2.19.4.1":1,"2.19.4.2-rolling":4,"2.2":7,"2.20":24,"2.21":17,"2.22":13,"2.23":37,"2.24":14,"2.25":35,"2.26":15,"2.27":38,"2.28":19,"2.29":2,"2.3":18,"2.30":23,"2.31":8,"2.32":38,"2.32.1":291,"2.32.1.1-rolling":1,"2.32.2":538,"2.32.2.6-rolling":2,"2.32.3":785,"2.32.3.1":1,"2.33":32,"2.34":38,"2.35":35,"2.36":27,"2.37":34,"2.38":35,"2.39":30,"2.4":2,"2.40":73,"2.41":44,"2.42":27,"2.43":19,"2.44":53,"2.45":85,"2.46":100,"2.46.1":2518,"2.46.2":7349,"2.46.2.1":24,"2.46.24.0.1":1,"2.46.3":13403,"2.46.3.2":414,"2.47":77,"2.48":101,"2.49":81,"2.5":12,"2.50":101,"2.51":115,"2.52":155,"2.53":493,"2.54":310,"2.55":398,"2.56":247,"2.57":359,"2.58":629,"2.59":369,"2.6":16,"2.60":482,"2.60.1":5015,"2.60.1.1":29,"2.61":1087,"2.62":1297,"2.63":1634,"2.64":2472,"2.65":2036,"2.66":2779,"2.67":2993,"2.67-ialbors":1,"2.7":30,"2.7.1":104,"2.7.2":103,"2.7.24.0.1":2,"2.7.24.0.2":5,"2.7.3":74,"2.7.4":531,"2.8":53,"2.9":110},"2.4":{"1.596.2":1,"1.596.3":1,"1.607":1,"1.609":1,"1.615":1,"1.621":1,"1.622":1,"1.625.1":1,"1.625.2":2,"1.625.3":6,"1.626":3,"1.627":1,"1.628":2,"1.630":2,"1.632":2,"1.634":3,"1.635":2,"1.636":1,"1.638":4,"1.641":1,"1.642":3,"1.642.1":5,"1.642.4":27,"1.643":9,"1.644":14,"1.651.1":43,"1.651.2":33,"1.651.3":136,"1.653":7,"1.654":5,"1.655":6,"1.656":24,"1.658":24,"2.0":41,"2.0-alpha-4":1,"2.0-beta-1":1,"2.0-beta-2":2,"2.0-rc-1":5,"2.1":23,"2.10":41,"2.11":26,"2.12":14,"2.13":20,"2.14":21,"2.15":25,"2.16":26,"2.17":17,"2.18":14,"2.19":41,"2.19.1":329,"2.19.2":183,"2.19.3":437,"2.19.4":1273,"2.19.4.2-rolling":9,"2.2":18,"2.20":34,"2.21":26,"2.22":25,"2.23":55,"2.24":21,"2.25":29,"2.26":35,"2.27":47,"2.28":22,"2.29":4,"2.3":25,"2.30":40,"2.31":13,"2.32":55,"2.32.1":1835,"2.32.1.1-rolling":16,"2.32.2":1787,"2.32.2.1":16,"2.32.2.1-rolling":47,"2.32.2.6":41,"2.32.2.6-rolling":20,"2.32.2.7":3,"2.32.2.7-rolling":8,"2.32.3":2259,"2.32.3-INFONOVA-1":1,"2.32.3.1":391,"2.32.3.2":37,"2.33":155,"2.34":222,"2.35":263,"2.36":197,"2.37":235,"2.38":235,"2.39":273,"2.4":6,"2.40":256,"2.41":204,"2.42":177,"2.43":104,"2.44":183,"2.45":312,"2.46":235,"2.46.1":988,"2.46.2":811,"2.46.2.1":292,"2.46.3":912,"2.46.3.2":3,"2.47":277,"2.48":380,"2.49":323,"2.5":14,"2.50":358,"2.51":388,"2.52":440,"2.53":394,"2.54":69,"2.55":64,"2.56":41,"2.57":58,"2.58":90,"2.59":41,"2.6":28,"2.60":54,"2.60.1":258,"2.61":113,"2.62":119,"2.63":124,"2.64":145,"2.65":124,"2.66":181,"2.67":158,"2.7":42,"2.7.1":143,"2.7.2":126,"2.7.24.0.2":1,"2.7.3":76,"2.7.4":381,"2.8":41,"2.9":100},"2.3":{"1.574":1,"1.598":1,"1.609.1":1,"1.612":1,"1.619":1,"1.625.2":1,"1.625.3":1,"1.630":2,"1.631":1,"1.632":1,"1.634":1,"1.639":2,"1.642":3,"1.642.4":11,"1.643":5,"1.644":1,"1.651.1":20,"1.651.2":35,"1.651.3":63,"1.653":4,"1.654":3,"1.655":7,"1.656":7,"1.658":16,"2.0":23,"2.0-beta-1":2,"2.0-rc-1":1,"2.1":14,"2.10":15,"2.11":16,"2.12":9,"2.13":6,"2.14":6,"2.15":13,"2.16":8,"2.17":12,"2.18":17,"2.19":25,"2.19.1":1012,"2.19.2":483,"2.19.3":189,"2.19.3.1-rolling":15,"2.19.4":105,"2.19.4.2-rolling":39,"2.2":4,"2.20":22,"2.21":18,"2.22":35,"2.23":229,"2.24":109,"2.25":144,"2.26":139,"2.27":155,"2.28":121,"2.29":27,"2.3":11,"2.30":186,"2.31":50,"2.32":97,"2.32.1":106,"2.32.2":86,"2.32.3":54,"2.33":59,"2.34":32,"2.35":19,"2.36":26,"2.37":21,"2.38":25,"2.39":25,"2.4":1,"2.40":14,"2.41":17,"2.42":17,"2.43":8,"2.44":12,"2.45":17,"2.46":12,"2.46.1":62,"2.46.2":105,"2.46.3":151,"2.46.3.2":3,"2.47":17,"2.48":28,"2.49":15,"2.5":6,"2.50":23,"2.51":19,"2.52":23,"2.53":42,"2.54":11,"2.55":10,"2.56":8,"2.57":10,"2.58":18,"2.59":4,"2.6":16,"2.60":12,"2.60.1":44,"2.61":17,"2.62":22,"2.63":22,"2.64":37,"2.65":30,"2.66":34,"2.67":53,"2.7":30,"2.7.1":91,"2.7.2":120,"2.7.24.0.2":2,"2.7.3":57,"2.7.4":550,"2.8":21,"2.9":42},"2.2":{"1.572":1,"1.622":1,"1.625.1":3,"1.625.3":15,"1.627":1,"1.629":2,"1.631":1,"1.634":2,"1.636":3,"1.638":1,"1.640":1,"1.641":1,"1.642.1":3,"1.642.4":32,"1.643":7,"1.644":6,"1.651.1":30,"1.651.2":28,"1.651.3":77,"1.653":3,"1.654":6,"1.655":5,"1.656":11,"1.658":24,"2.0":31,"2.0-alpha-4":1,"2.0-beta-1":1,"2.0-beta-2":2,"2.0-rc-1":8,"2.1":16,"2.10":24,"2.11":37,"2.12":37,"2.13":134,"2.14":122,"2.15":118,"2.16":129,"2.17":150,"2.18":99,"2.19":136,"2.19.1":87,"2.19.2":31,"2.19.3":41,"2.19.4":79,"2.2":15,"2.20":128,"2.21":127,"2.22":115,"2.23":127,"2.24":9,"2.25":11,"2.26":7,"2.27":21,"2.28":12,"2.29":2,"2.3":17,"2.30":18,"2.31":4,"2.32":6,"2.32.1":77,"2.32.1.1-rolling":1,"2.32.2":69,"2.32.3":62,"2.33":7,"2.34":13,"2.35":13,"2.36":7,"2.37":15,"2.38":10,"2.39":7,"2.4":4,"2.40":13,"2.41":16,"2.42":16,"2.43":5,"2.44":15,"2.45":22,"2.46":18,"2.46.1":59,"2.46.2":121,"2.46.3":151,"2.47":16,"2.48":23,"2.49":11,"2.5":14,"2.50":17,"2.51":24,"2.52":25,"2.53":40,"2.54":10,"2.55":12,"2.56":10,"2.57":4,"2.58":17,"2.59":8,"2.6":27,"2.60":8,"2.60.1":41,"2.61":19,"2.62":14,"2.63":28,"2.64":38,"2.65":13,"2.66":39,"2.67":44,"2.7":27,"2.7.1":702,"2.7.2":766,"2.7.2-continental":1,"2.7.22.0.3":3,"2.7.24.0.2":12,"2.7.3":267,"2.7.4":460,"2.8":41,"2.9":49},"2.1":{"1.616":1,"1.617":1,"1.622":1,"1.623":1,"1.625":1,"1.625.3":3,"1.630":1,"1.631":1,"1.634":1,"1.635":4,"1.636":2,"1.641":1,"1.642":2,"1.642.1":2,"1.642.4":11,"1.643":5,"1.644":3,"1.651.1":14,"1.651.2":28,"1.651.3":60,"1.653":1,"1.654":2,"1.655":6,"1.656":17,"1.658":14,"2.0":29,"2.0-beta-1":1,"2.0-rc-1":3,"2.1":17,"2.10":138,"2.11":171,"2.12":87,"2.13":45,"2.14":15,"2.15":10,"2.16":8,"2.17":7,"2.18":10,"2.19":14,"2.19.1":19,"2.19.2":6,"2.19.3":17,"2.19.4":9,"2.2":14,"2.20":8,"2.21":9,"2.22":8,"2.23":23,"2.24":4,"2.25":7,"2.26":3,"2.27":10,"2.28":7,"2.29":1,"2.3":14,"2.30":12,"2.31":2,"2.32":6,"2.32.1":8,"2.32.2":14,"2.32.3":14,"2.33":4,"2.34":8,"2.35":6,"2.36":9,"2.37":9,"2.38":4,"2.39":8,"2.4":6,"2.40":2,"2.41":5,"2.42":7,"2.43":2,"2.44":2,"2.45":5,"2.46":8,"2.46.1":8,"2.46.2":25,"2.46.3":33,"2.47":6,"2.48":11,"2.49":4,"2.5":26,"2.50":6,"2.51":8,"2.52":13,"2.53":15,"2.54":6,"2.55":7,"2.56":3,"2.57":4,"2.58":15,"2.59":6,"2.6":24,"2.60":4,"2.60.1":12,"2.61":14,"2.62":7,"2.63":13,"2.64":15,"2.65":12,"2.66":16,"2.67":21,"2.7":129,"2.7.1":85,"2.7.2":14,"2.7.3":5,"2.7.4":13,"2.8":192,"2.9":122},"2.0":{"1.608":1,"1.609.3":1,"1.615":1,"1.617":3,"1.618":1,"1.625.1":1,"1.625.3":3,"1.626":1,"1.627":3,"1.628":1,"1.629":1,"1.630":1,"1.631":1,"1.632":1,"1.634":2,"1.635":1,"1.636":2,"1.637":1,"1.638":2,"1.639":1,"1.640":1,"1.642":4,"1.642.1":2,"1.642.4":14,"1.643":8,"1.644":3,"1.651.1":47,"1.651.2":26,"1.651.3":35,"1.653":3,"1.654":6,"1.655":8,"1.656":36,"1.657":1,"1.658":14,"2.0":246,"2.0-alpha-2":1,"2.0-alpha-3":1,"2.0-beta-1":1,"2.0-rc-1":12,"2.1":157,"2.10":32,"2.11":28,"2.12":14,"2.13":13,"2.14":11,"2.15":9,"2.16":14,"2.17":11,"2.18":5,"2.19":8,"2.19.1":16,"2.19.2":5,"2.19.3":5,"2.19.4":9,"2.2":103,"2.20":10,"2.21":10,"2.22":6,"2.23":14,"2.24":5,"2.25":9,"2.26":5,"2.27":17,"2.28":4,"2.29":1,"2.3":127,"2.30":6,"2.31":1,"2.32":4,"2.32.1":6,"2.32.2":2,"2.32.3":5,"2.33":4,"2.34":5,"2.35":13,"2.36":3,"2.37":9,"2.38":5,"2.39":15,"2.4":35,"2.40":9,"2.41":6,"2.42":8,"2.43":8,"2.44":9,"2.45":13,"2.46":8,"2.46.1":13,"2.46.2":15,"2.46.3":23,"2.47":11,"2.48":10,"2.49":11,"2.5":141,"2.50":9,"2.51":15,"2.52":13,"2.53":40,"2.54":13,"2.55":12,"2.56":1,"2.57":7,"2.58":15,"2.59":7,"2.6":148,"2.60":6,"2.60.1":4,"2.61":23,"2.62":15,"2.63":18,"2.64":24,"2.65":25,"2.66":33,"2.67":47,"2.7":105,"2.7.1":22,"2.7.2":24,"2.7.3":2,"2.7.4":29,"2.8":26,"2.9":26}};

    var pluginVersionsSet = new Set();

    var coreVersionsSet = new Set();

    var totalInstallsPerPluginVersion = new Map();

    var totalInstalls = 0

    for (var pluginVersion in versionData) {
        if (/^\d[\d.]*\d$/.test(pluginVersion)) {
            pluginVersionsSet.add(pluginVersion);
            if (!totalInstallsPerPluginVersion.has(pluginVersion)) {
                totalInstallsPerPluginVersion[pluginVersion] = 0;
            }
            for (var coreVersion in versionData[pluginVersion]) {
                if (/^[12][.]\d+(|[.]\d)$/.test(coreVersion)) {
                    coreVersionsSet.add(coreVersion);
                    totalInstalls += versionData[pluginVersion][coreVersion];
                    totalInstallsPerPluginVersion[pluginVersion] += versionData[pluginVersion][coreVersion];
                }
            }
        }
    }

    var collator = new Intl.Collator(undefined, {numeric: true, sensitivity: 'base'});

    var pluginVersions = Array.from(pluginVersionsSet);
    pluginVersions.sort(collator.compare);

    var coreVersions = Array.from(coreVersionsSet);
    coreVersions.sort(collator.compare);

    var thisCoreVersionOrOlderPerPluginVersion = {};

    // header row
    var row = $("<tr>");
    row.append($("<th>").html("pipeline-build-step - " + totalInstalls));
    for (let pluginVersion of pluginVersions) {
        row.append($("<th>").html(pluginVersion));
        thisCoreVersionOrOlderPerPluginVersion[pluginVersion] = 0;
    }
    row.append($("<th>").html("Sum"));
    row.appendTo('#versionsContainer');


    var thisCoreVersionOrOlder = 0

    // value rows
    for (let coreVersion of coreVersions) {
        var row = $("<tr>");
        if (/^\d[.]\d+[.]\d$/.test(coreVersion)) {
            row.addClass('lts');
        }
        row.append($("<th>").html(coreVersion));
        var thisCoreVersion = 0;
        for (let pluginVersion of pluginVersions) {
            var cnt = versionData[pluginVersion][coreVersion];
            if (cnt == null) {
                cnt = 0;
            }
            thisCoreVersion += cnt;
            var title = pluginVersion + " on " + coreVersion + ": " + cnt + " installs (" + Math.round(cnt/totalInstalls*100) + "%)";
            title += " - " + Math.round((1-thisCoreVersionOrOlderPerPluginVersion[pluginVersion]/totalInstallsPerPluginVersion[pluginVersion])*100) + "% of " + pluginVersion + " installs are on this core version or newer";
            row.append($("<td>").attr("title", title).css("opacity", Math.max(0.1, cnt*100/totalInstalls)).html(cnt));

            thisCoreVersionOrOlderPerPluginVersion[pluginVersion] += cnt;
        }

        var title = coreVersion + " total: " + thisCoreVersion + " installs (" + Math.round(thisCoreVersion/totalInstalls*100) + "%)";
        title += " - " + Math.round((1-thisCoreVersionOrOlder/totalInstalls)*100) + "% of plugin installs are on this core version or newer";
        row.append($("<td>").addClass("subtotal").attr("title", title).html(thisCoreVersion));

        thisCoreVersionOrOlder += thisCoreVersion;

        row.appendTo('#versionsContainer');
    }
});
        </script>
    </head>
    <body>
        <table id="versionsContainer"></table>
    </body>
</html>